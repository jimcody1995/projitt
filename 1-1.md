# Onboarding List API Specification

## Overview
This document outlines the backend API requirements for the "Onboarding List" feature in the HR/Employee Management System. The feature provides comprehensive management of employee onboarding processes, including employee lists, onboarding plans, tasks, and detailed views.

## Feature Components
Based on the Figma designs, the onboarding list feature includes:
1. **Employee Onboarding List** - Table view of employees in onboarding process
2. **Onboarding Plans List** - Management of onboarding templates/plans
3. **Task Management** - Individual onboarding tasks tracking
4. **Detailed Views** - Comprehensive onboarding process management
5. **Modal Forms** - Add/edit onboarding elements

---

## API Endpoints Required

### 1. Employee Onboarding Management

#### Get Onboarding Employees List
```
GET /api/onboarding/employees
```
**Query Parameters:**
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 10)
- `search` (optional): Search by employee name
- `department` (optional): Filter by department
- `status` (optional): Filter by status (onboarding, completed, pending)
- `start_date_from` (optional): Filter by start date from
- `start_date_to` (optional): Filter by start date to

**Response:**
```json
{
  "success": true,
  "data": {
    "employees": [
      {
        "id": "emp_001",
        "employeeName": "John Doe",
        "department": "HR",
        "startDate": "2023-01-15",
        "status": "onboarding",
        "progress": 35,
        "jobTitle": "HR Specialist",
        "country": "United States",
        "lastSession": "2024-01-15T10:30:00Z",
        "onboardingPlan": {
          "id": "plan_001",
          "name": "Standard HR Onboarding",
          "duration": 7
        }
      },
      {
        "id": "emp_002",
        "employeeName": "Jane Smith",
        "department": "Marketing",
        "startDate": "2023-02-01",
        "status": "completed",
        "progress": 100,
        "jobTitle": "Marketing Manager",
        "country": "United States",
        "lastSession": "2024-02-01T14:20:00Z",
        "onboardingPlan": {
          "id": "plan_002",
          "name": "Marketing Team Onboarding",
          "duration": 5
        }
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 25,
      "totalPages": 3
    }
  }
}
```

#### Get Employee Onboarding Details
```
GET /api/onboarding/employees/{employeeId}
```
**Response:**
```json
{
  "success": true,
  "data": {
    "id": "emp_001",
    "employeeName": "John Doe",
    "department": "HR",
    "startDate": "2023-01-15",
    "status": "onboarding",
    "progress": 35,
    "jobTitle": "HR Specialist",
    "country": "United States",
    "onboardingPlan": {
      "id": "plan_001",
      "name": "Standard HR Onboarding",
      "duration": 7,
      "description": "Comprehensive onboarding for HR team members"
    },
    "tasks": [
      {
        "id": "task_001",
        "name": "Complete HR Forms",
        "assignedTo": "John Doe",
        "dueDate": "2023-01-16",
        "status": "completed",
        "completedAt": "2023-01-16T09:15:00Z"
      },
      {
        "id": "task_002",
        "name": "Setup Laptop",
        "assignedTo": "IT Department",
        "dueDate": "2023-01-15",
        "status": "in_progress",
        "completedAt": null
      },
      {
        "id": "task_003",
        "name": "Welcome Meeting",
        "assignedTo": "Manager",
        "dueDate": "2023-01-17",
        "status": "pending",
        "completedAt": null
      }
    ],
    "checklist": [
      {
        "id": "check_001",
        "name": "Upload ID & Certifications",
        "status": "completed",
        "completedAt": "2023-01-15T11:30:00Z"
      },
      {
        "id": "check_002",
        "name": "Complete Personal Information",
        "status": "in_progress",
        "completedAt": null
      },
      {
        "id": "check_003",
        "name": "Submit Bank & Tax info",
        "status": "pending",
        "completedAt": null
      }
    ]
  }
}
```

#### Update Employee Onboarding Status
```
PUT /api/onboarding/employees/{employeeId}/status
```
**Request Body:**
```json
{
  "status": "completed",
  "notes": "All onboarding tasks completed successfully"
}
```

#### Add New Employee to Onboarding
```
POST /api/onboarding/employees
```
**Request Body:**
```json
{
  "employeeId": "emp_003",
  "onboardingPlanId": "plan_001",
  "startDate": "2024-01-20",
  "assignedTo": "hr_manager_001"
}
```

### 2. Onboarding Plans Management

#### Get Onboarding Plans List
```
GET /api/onboarding/plans
```
**Query Parameters:**
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 10)
- `search` (optional): Search by plan name
- `department` (optional): Filter by department
- `status` (optional): Filter by status (active, draft, archived)

**Response:**
```json
{
  "success": true,
  "data": {
    "plans": [
      {
        "id": "plan_001",
        "onboardingName": "New Employee Onboarding",
        "department": "HR",
        "startDate": "2023-01-15",
        "status": "in_progress",
        "duration": 7,
        "description": "Standard onboarding process for new employees",
        "createdBy": "admin_001",
        "createdAt": "2023-01-01T00:00:00Z",
        "updatedAt": "2023-01-15T10:30:00Z"
      },
      {
        "id": "plan_002",
        "onboardingName": "Marketing Team Onboarding",
        "department": "Marketing",
        "startDate": "2023-02-01",
        "status": "completed",
        "duration": 5,
        "description": "Specialized onboarding for marketing team",
        "createdBy": "hr_manager_001",
        "createdAt": "2023-01-15T00:00:00Z",
        "updatedAt": "2023-02-01T14:20:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 15,
      "totalPages": 2
    }
  }
}
```

#### Create New Onboarding Plan
```
POST /api/onboarding/plans
```
**Request Body:**
```json
{
  "onboardingName": "IT Department Onboarding",
  "department": "IT",
  "duration": 10,
  "description": "Comprehensive onboarding for IT professionals",
  "tasks": [
    {
      "name": "System Access Setup",
      "assignedTo": "it_admin_001",
      "dueDate": "2024-01-16",
      "priority": "high"
    },
    {
      "name": "Security Training",
      "assignedTo": "security_team",
      "dueDate": "2024-01-18",
      "priority": "high"
    }
  ],
  "checklist": [
    {
      "name": "Upload ID & Certifications",
      "required": true
    },
    {
      "name": "Complete Personal Information",
      "required": true
    }
  ]
}
```

#### Update Onboarding Plan
```
PUT /api/onboarding/plans/{planId}
```
**Request Body:**
```json
{
  "onboardingName": "Updated IT Department Onboarding",
  "duration": 12,
  "description": "Updated comprehensive onboarding for IT professionals",
  "status": "active"
}
```

#### Get Onboarding Plan Details
```
GET /api/onboarding/plans/{planId}
```
**Response:**
```json
{
  "success": true,
  "data": {
    "id": "plan_001",
    "onboardingName": "New Employee Onboarding",
    "department": "HR",
    "duration": 7,
    "description": "Standard onboarding process for new employees",
    "status": "active",
    "createdBy": "admin_001",
    "createdAt": "2023-01-01T00:00:00Z",
    "updatedAt": "2023-01-15T10:30:00Z",
    "tasks": [
      {
        "id": "task_001",
        "name": "Complete HR Forms",
        "assignedTo": "hr_team",
        "dueDate": "2024-01-16",
        "priority": "high",
        "description": "Complete all required HR documentation"
      },
      {
        "id": "task_002",
        "name": "Setup Laptop",
        "assignedTo": "it_department",
        "dueDate": "2024-01-15",
        "priority": "medium",
        "description": "Configure laptop with required software"
      }
    ],
    "checklist": [
      {
        "id": "check_001",
        "name": "Upload ID & Certifications",
        "required": true,
        "description": "Upload government ID and relevant certifications"
      },
      {
        "id": "check_002",
        "name": "Complete Personal Information",
        "required": true,
        "description": "Fill out personal information form"
      }
    ]
  }
}
```

### 3. Task Management

#### Get Onboarding Tasks List
```
GET /api/onboarding/tasks
```
**Query Parameters:**
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 10)
- `search` (optional): Search by task name
- `assignedTo` (optional): Filter by assigned person
- `status` (optional): Filter by status (pending, in_progress, completed)
- `dueDateFrom` (optional): Filter by due date from
- `dueDateTo` (optional): Filter by due date to

**Response:**
```json
{
  "success": true,
  "data": {
    "tasks": [
      {
        "id": "task_001",
        "taskName": "Complete HR Forms",
        "assignedTo": "John Doe",
        "dueDate": "2023-01-16",
        "status": "completed",
        "priority": "high",
        "employeeId": "emp_001",
        "onboardingPlanId": "plan_001",
        "completedAt": "2023-01-16T09:15:00Z",
        "createdAt": "2023-01-15T08:00:00Z"
      },
      {
        "id": "task_002",
        "taskName": "Setup Laptop",
        "assignedTo": "IT Department",
        "dueDate": "2023-01-15",
        "status": "in_progress",
        "priority": "medium",
        "employeeId": "emp_001",
        "onboardingPlanId": "plan_001",
        "completedAt": null,
        "createdAt": "2023-01-15T08:00:00Z"
      },
      {
        "id": "task_003",
        "taskName": "Welcome Meeting",
        "assignedTo": "Manager",
        "dueDate": "2023-01-17",
        "status": "pending",
        "priority": "low",
        "employeeId": "emp_001",
        "onboardingPlanId": "plan_001",
        "completedAt": null,
        "createdAt": "2023-01-15T08:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 45,
      "totalPages": 5
    }
  }
}
```

#### Create New Task
```
POST /api/onboarding/tasks
```
**Request Body:**
```json
{
  "taskName": "Security Training",
  "assignedTo": "security_team",
  "dueDate": "2024-01-20",
  "priority": "high",
  "employeeId": "emp_001",
  "onboardingPlanId": "plan_001",
  "description": "Complete security awareness training"
}
```

#### Update Task Status
```
PUT /api/onboarding/tasks/{taskId}/status
```
**Request Body:**
```json
{
  "status": "completed",
  "notes": "Task completed successfully",
  "completedAt": "2024-01-20T14:30:00Z"
}
```

#### Update Task Details
```
PUT /api/onboarding/tasks/{taskId}
```
**Request Body:**
```json
{
  "taskName": "Updated Security Training",
  "assignedTo": "security_team_lead",
  "dueDate": "2024-01-22",
  "priority": "high",
  "description": "Updated security awareness training with new modules"
}
```

### 4. Checklist Management

#### Get Onboarding Checklist
```
GET /api/onboarding/checklist/{employeeId}
```
**Response:**
```json
{
  "success": true,
  "data": {
    "employeeId": "emp_001",
    "checklist": [
      {
        "id": "check_001",
        "name": "Upload ID & Certifications",
        "status": "completed",
        "required": true,
        "completedAt": "2023-01-15T11:30:00Z",
        "description": "Upload government ID and relevant certifications"
      },
      {
        "id": "check_002",
        "name": "Complete Personal Information",
        "status": "in_progress",
        "required": true,
        "completedAt": null,
        "description": "Fill out personal information form"
      },
      {
        "id": "check_003",
        "name": "Submit Bank & Tax info",
        "status": "pending",
        "required": true,
        "completedAt": null,
        "description": "Submit banking and tax information"
      },
      {
        "id": "check_004",
        "name": "Training & Orientation",
        "status": "pending",
        "required": false,
        "completedAt": null,
        "description": "Complete training and orientation sessions"
      }
    ]
  }
}
```

#### Update Checklist Item Status
```
PUT /api/onboarding/checklist/{checklistId}/status
```
**Request Body:**
```json
{
  "status": "completed",
  "completedAt": "2024-01-20T15:45:00Z",
  "notes": "All documents uploaded successfully"
}
```

### 5. Background Check Management

#### Get Background Check List
```
GET /api/onboarding/background-checks
```
**Query Parameters:**
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 10)
- `search` (optional): Search by employee name
- `status` (optional): Filter by status (ongoing, completed)
- `sensitivity` (optional): Filter by sensitivity level (low, medium, high)

**Response:**
```json
{
  "success": true,
  "data": {
    "backgroundChecks": [
      {
        "id": "bg_001",
        "employeeName": "Alice Fernadez",
        "dateOfBirth": "1990-05-10",
        "sensitivity": "medium",
        "checks": ["criminal", "employment", "education", "identity"],
        "regions": "medium",
        "status": "completed",
        "employeeId": "emp_001",
        "startedAt": "2023-01-15T08:00:00Z",
        "completedAt": "2023-01-20T16:30:00Z"
      },
      {
        "id": "bg_002",
        "employeeName": "Savannah Nguyen",
        "dateOfBirth": "1985-12-01",
        "sensitivity": "high",
        "checks": ["education", "identity"],
        "regions": "high",
        "status": "ongoing",
        "employeeId": "emp_002",
        "startedAt": "2023-02-01T09:00:00Z",
        "completedAt": null
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 20,
      "totalPages": 2
    }
  }
}
```

#### Create Background Check
```
POST /api/onboarding/background-checks
```
**Request Body:**
```json
{
  "employeeId": "emp_003",
  "sensitivity": "high",
  "checks": ["criminal", "employment", "education", "identity", "credit"],
  "regions": "high",
  "notes": "High-level position requiring comprehensive background check"
}
```

#### Update Background Check Status
```
PUT /api/onboarding/background-checks/{checkId}/status
```
**Request Body:**
```json
{
  "status": "completed",
  "completedAt": "2024-01-25T10:00:00Z",
  "results": {
    "criminal": "clear",
    "employment": "verified",
    "education": "verified",
    "identity": "verified"
  },
  "notes": "All background checks completed successfully"
}
```

### 6. Bulk Operations

#### Bulk Update Employee Status
```
PUT /api/onboarding/employees/bulk-status
```
**Request Body:**
```json
{
  "employeeIds": ["emp_001", "emp_002", "emp_003"],
  "status": "completed",
  "notes": "Bulk completion of onboarding process"
}
```

#### Export Onboarding Data
```
GET /api/onboarding/export
```
**Query Parameters:**
- `format` (optional): Export format (csv, excel) - default: csv
- `type` (optional): Export type (employees, plans, tasks) - default: employees
- `filters` (optional): JSON string of filters to apply

**Response:** File download (CSV/Excel)

---

## Data Models

### Employee Onboarding
```typescript
interface EmployeeOnboarding {
  id: string;
  employeeName: string;
  department: string;
  startDate: string; // ISO date
  status: 'onboarding' | 'completed' | 'pending' | 'suspended';
  progress: number; // 0-100
  jobTitle: string;
  country: string;
  lastSession: string; // ISO datetime
  onboardingPlan: OnboardingPlan;
  createdAt: string; // ISO datetime
  updatedAt: string; // ISO datetime
}
```

### Onboarding Plan
```typescript
interface OnboardingPlan {
  id: string;
  onboardingName: string;
  department: string;
  duration: number; // days
  description: string;
  status: 'active' | 'draft' | 'archived';
  createdBy: string;
  createdAt: string; // ISO datetime
  updatedAt: string; // ISO datetime
  tasks: OnboardingTask[];
  checklist: ChecklistItem[];
}
```

### Onboarding Task
```typescript
interface OnboardingTask {
  id: string;
  taskName: string;
  assignedTo: string;
  dueDate: string; // ISO date
  status: 'pending' | 'in_progress' | 'completed' | 'overdue';
  priority: 'low' | 'medium' | 'high';
  employeeId: string;
  onboardingPlanId: string;
  description?: string;
  completedAt?: string; // ISO datetime
  createdAt: string; // ISO datetime
  updatedAt: string; // ISO datetime
}
```

### Checklist Item
```typescript
interface ChecklistItem {
  id: string;
  name: string;
  status: 'pending' | 'in_progress' | 'completed';
  required: boolean;
  description?: string;
  completedAt?: string; // ISO datetime
  employeeId: string;
  onboardingPlanId: string;
}
```

### Background Check
```typescript
interface BackgroundCheck {
  id: string;
  employeeName: string;
  dateOfBirth: string; // ISO date
  sensitivity: 'low' | 'medium' | 'high';
  checks: ('criminal' | 'employment' | 'education' | 'identity' | 'credit')[];
  regions: 'low' | 'medium' | 'high';
  status: 'ongoing' | 'completed' | 'failed';
  employeeId: string;
  startedAt: string; // ISO datetime
  completedAt?: string; // ISO datetime
  results?: Record<string, string>;
  notes?: string;
}
```

---

## Error Responses

All endpoints should return consistent error responses:

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input data",
    "details": [
      {
        "field": "startDate",
        "message": "Start date is required"
      }
    ]
  }
}
```

### Common Error Codes
- `VALIDATION_ERROR`: Input validation failed
- `NOT_FOUND`: Resource not found
- `UNAUTHORIZED`: Authentication required
- `FORBIDDEN`: Insufficient permissions
- `CONFLICT`: Resource already exists
- `INTERNAL_ERROR`: Server error

---

## Authentication & Authorization

All endpoints require authentication via JWT token in the Authorization header:
```
Authorization: Bearer <jwt_token>
```

### Required Permissions
- `onboarding:read`: View onboarding data
- `onboarding:write`: Create/update onboarding data
- `onboarding:delete`: Delete onboarding data
- `onboarding:admin`: Full onboarding management access

---

## Rate Limiting

- Standard endpoints: 100 requests per minute per user
- Bulk operations: 10 requests per minute per user
- Export endpoints: 5 requests per minute per user

---

## Notes for Backend Developer

1. **Database Considerations:**
   - Use proper indexing on frequently queried fields (employeeId, status, department)
   - Consider soft deletes for audit trails
   - Implement proper foreign key constraints

2. **Performance:**
   - Implement pagination for all list endpoints
   - Use database-level filtering and sorting
   - Consider caching for frequently accessed data

3. **Data Validation:**
   - Validate all input data according to the schemas
   - Implement proper date/time validation
   - Ensure referential integrity

4. **Audit Trail:**
   - Log all changes to onboarding data
   - Track who made changes and when
   - Maintain history for compliance

5. **Notifications:**
   - Send notifications when tasks are assigned
   - Alert when tasks are overdue
   - Notify when onboarding is completed

6. **File Handling:**
   - Support file uploads for documents
   - Implement proper file validation and storage
   - Consider virus scanning for uploaded files
